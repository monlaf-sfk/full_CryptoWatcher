# CryptoWatcher - Ваш Компаньон для Отслеживания Криптовалют

Привет! Это CryptoWatcher — веб-приложение, которое помогает следить за популярными криптовалютами. Можно посмотреть цены, изменения за сутки, поискать нужную монету и даже вести свой виртуальный портфель, чтобы видеть прибыль или убыток.

Проект состоит из двух частей, собранных в одном репозитории :
*   **Фронтенд:** Написан на React (с использованием Vite), развернут на Vercel.
*   **Бэкенд:** Написан на FastAPI (Python), развернут на Railway.

[![Screenshot-2025-04-26-at-12-01-29.png](https://i.postimg.cc/XNfKnVpr/Screenshot-2025-04-26-at-12-01-29.png)](https://postimg.cc/kD5RcPNC)

---

**Живые ссылки:**

*   **Репозиторий:** [https://github.com/monlaf-sfk/full_CryptoWatcher](https://github.com/monlaf-sfk/full_CryptoWatcher)
*   **Рабочее приложение (Фронтенд):** [https://front-nfac.vercel.app/](https://front-nfac.vercel.app/)
*   **Бэкенд API:** [https://backendnfac-production.up.railway.app/](https://backendnfac-production.up.railway.app/)
    *   *Документация API (Swagger):* [https://backendnfac-production.up.railway.app/docs](https://backendnfac-production.up.railway.app/docs)
*   **Видео-демо:** 


---

## Что умеет приложение?

*   **Список криптовалют:** Показывает таблицу с топ-100 монет: лого, название, текущая цена (USD), изменение за 24ч. ✅
*   **Живой поиск:** Фильтрует список монет по названию прямо во время ввода. ✅
*   **Страница портфолио:**
    *   Можно добавить монету: выбираешь какую, сколько купил и по какой цене (в USD). ✅
    *   Приложение показывает текущую стоимость каждой позиции, общую стоимость портфеля и рассчитанную прибыль/убыток (в USD и %). ✅
*   **Актуальные данные:** Бэкенд раз в минуту обновляет курсы с CoinGecko API. ✅
*   **Визуальная обратная связь:** Показывает индикаторы загрузки, сообщения об ошибках, если что-то пошло не так (например, API не отвечает). ✅
*   **Выбор валюты:** *[Если реализовал выбор USD/EUR/KZT, напиши об этом здесь. Если нет, можешь написать: "Сейчас основной валютой является USD."]*
*   **Внешние API:** Все запросы к CoinGecko идут строго через бэкенд. ✅

---

## Технологии (Стек)

*   **Бэкенд (`/backend`):**
    *   Python 3.12 / FastAPI: Для быстрой разработки асинхронного API.
    *   Aiohttp: Для асинхронных запросов к CoinGecko.
    *   Pydantic / Pydantic-Settings: Для валидации данных и управления настройками (включая API ключи).
    *   Asyncio Task: Для фонового обновления данных.
    *   Gunicorn + Uvicorn: Для запуска приложения в продакшене на Railway.
    *   `async-lru`: Для простого кеширования в памяти.
*   **Фронтенд (`/frontend`):**
    *   React 19 / Vite: Для создания интерфейса и быстрой сборки.
    *   React Router DOM v7: Для навигации между страницами.
    *   Axios: Для запросов к нашему бэкенд API.
    *   Ant Design (antd): Библиотека готовых UI-компонентов.
    *   Tailwind CSS: Для дополнительной стилизации [если использовал].
    *   JavaScript (JSX).
*   **Деплой:**
    *   Backend: Railway
    *   Frontend: Vercel
*   **База Данных:** Не используется (данные портфолио и кэш хранятся в памяти бэкенда).
*   **Инструменты:** Git, GitHub, npm, pip.

---

## Структура Проекта 
```plaintext
/full_CryptoWatcher
├── .git/
├── backend/ # Код Бэкенда (FastAPI)
│ ├── src/
│ │ ├── init.py
│ │ ├── main.py # FastAPI app, lifespan
│ │ ├── config.py # Pydantic Settings
│ │ ├── http_client.py # Клиент для CoinGecko (aiohttp)
│ │ ├── init.py # Инициализация клиента
│ │ ├── models.py # Модели данных (Pydantic)
│ │ ├── router.py # API роуты
│ │ └── task.py # Фоновая задача обновления
│ ├── .env.example # Пример переменных окружения
│ ├── Procfile # Команда запуска для Railway (Gunicorn)
│ └── requirements.txt # Python зависимости
│
├── frontend/ # Код Фронтенда (React + Vite)
│ ├── public/
│ ├── src/
│ │ ├── components/ # React компоненты
│ │ ├── App.jsx # Основной компонент
│ │ └── main.jsx # Точка входа React
│ ├── index.html # Точка входа HTML для Vite
│ ├── package.json # Node зависимости и скрипты
│ ├── vite.config.js # Конфигурация Vite
│ └── tailwind.config.js # Конфигурация Tailwind (если используется)
│
├── .gitignore # Общий gitignore для монорепо
└── README.md # Этот файл
```
---

## Установка и запуск

**Требования:**

*   Python 3.10+ (рекомендуется 3.12)
*   Node.js 20+ (из-за требований `react-router-dom` v7) и npm/yarn
*   Git

**Инструкции (из корня монорепозитория `full_CryptoWatcher`):**

1.  **Клонировать репозиторий:**
    ```bash
    git clone https://github.com/monlaf-sfk/full_CryptoWatcher.git
    cd full_CryptoWatcher
    ```

2.  **Настроить Backend (FastAPI):**
    ```bash
    cd backend 
    python3 -m venv venv
    # Windows: venv\Scripts\activate
    # macOS/Linux: source venv/bin/activate
    pip install -r requirements.txt

    # Создать файл .env из .env.example и заполнить его
    # cp .env.example .env
    # Отредактировать .env, указав ваш API_COINGECKO и FRONTEND_URL (для локального CORS)
    # API_COINGECKO=CG-...
    # FRONTEND_URL=http://localhost:5173
    # Запустить бэкенд приложение
    cd .. 
    cd backend/src 
    uvicorn main:app --reload --host 0.0.0.0 --port 8000
    cd ../.. 
    ```
    API будет доступен по адресу `http://localhost:8000`. Документация: `http://localhost:8000/docs`.

3.  **Настроить Frontend (React):**
    ```bash
    cd frontend 

    npm install


    # Отредактировать urls.jsx, указав адрес локального API
    # API_BASE_URL=http://localhost:8000

    # Запустить frontend приложение в режиме разработки
    npm run dev
    ```
    Приложение будет доступно в браузере по адресу `http://localhost:5173` (или другому порту, указанному Vite).
## Процесс проектирования и разработки


1.  **Анализ требований:** Изучение ТЗ, определение основного функционала (список, поиск, портфолио), выбор технологий (FastAPI, React).
2.  **Проектирование API:** Определение эндпоинтов (`/api/v1/cryptocurrencies`, `/api/v1/cryptocurrency/{id}`, `/api/v1/portfolio`), моделей данных (Pydantic).
3.  **Разработка Backend:**
    *   Настройка FastAPI, CORS, Pydantic-Settings.
    *   Реализация `aiohttp` клиента для CoinGecko (`http_client.py`).
    *   Настройка фоновой задачи (`task.py`) для обновления данных и кэширования в памяти (`market_data_cache`).
    *   Реализация роутов (`router.py`) для получения данных и управления портфолио (хранение в памяти `portfolio_storage`).
    *   Использование `lifespan` для управления HTTP-клиентом и фоновой задачей.
4.  **Разработка Frontend:**
    *   Настройка Vite + React.
    *   Интеграция Ant Design и Tailwind CSS.
    *   Создание компонентов: список монет, карточка монеты, поиск, страница портфолио.
    *   Настройка роутинга с `react-router-dom`.
    *   Реализация запросов к API бэкенда с помощью `axios`.
    *   Управление состоянием (например, `useState`, `useContext`, или другая библиотека).
    *   Реализация логики поиска (фильтрация на клиенте) и портфолио (отправка данных, расчет P/L на клиенте или получение рассчитанных данных с бэка).
5.  **Деплой:**
    *   Настройка Vercel для фронтенда (указание Root Directory `frontend/`).
    *   Настройка Railway для бэкенда (указание Root Directory `backend/`, `Procfile`, переменных окружения `API_COINGECKO`, `FRONTEND_URL`).
    *   Отладка проблем с CORS, переменных окружения, команд запуска (Gunicorn, `serve`), несоответствия портов, ошибок API CoinGecko.

---

## Объяснение выбора технического стека

*   **FastAPI (Backend):** Выбран из-за высокой производительности, встроенной поддержки асинхронности (идеально для работы с внешними API и фоновыми задачами), автоматической генерации документации API (Swagger UI), удобной валидации данных с Pydantic и типизации Python, что ускоряет разработку и повышает надежность.
*   **React (Frontend):** Популярная и мощная библиотека для создания динамических пользовательских интерфейсов. Компонентный подход упрощает разработку и поддержку. Огромная экосистема библиотек (Ant Design для готовых UI-компонентов, `react-router-dom` для навигации) ускоряет разработку. Vite выбран как современный и быстрый сборщик для React.
*   **Vercel (Frontend Hosting):** Предоставляет отличный DX (Developer Experience) для деплоя фронтенд-приложений, автоматическую сборку, CDN, легкую интеграцию с GitHub. Идеально подходит для статичных сайтов и SPA, созданных с помощью Vite/React.
*   **Railway (Backend Hosting):** Удобная платформа для деплоя бэкенд-приложений и баз данных. Автоматически определяет тип приложения (Python), использует `Procfile` для запуска, легко управляет переменными окружения и предоставляет публичные URL.
*   **CoinGecko API:** Бесплатный и достаточно полный источник данных о криптовалютах для данного проекта.

---

## Уникальные подходы или методологии

*   Использование FastAPI `lifespan` для корректного управления жизненным циклом асинхронного HTTP-клиента (`aiohttp`) и фоновой задачи обновления данных.
*   Применение `async-lru` для кэширования ответов от эндпоинта деталей монеты CoinGecko, чтобы уменьшить количество запросов к внешнему API.
*   Хранение данных портфолио и кэша рыночных данных в памяти бэкенда (для простоты).

